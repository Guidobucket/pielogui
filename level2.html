<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="level2.css">
</head>
<body background="spazio.jpeg">
    
<div class="navicella">
    <img src="navicella.png " width="270" >
</div>
  
<div class="alieni">
    <img src="alieni.png" >
</div>

<div class="alieni2">
    <img src="alieni2.png" >
</div>

<div class="alieni3">
    <img src="alieni3.png" >
</div>

<div class="alieni4">
    <img src="alieni4.png" >
</div>


<script>
    // Valorizing variables
    const charEl = document.querySelector('.navicella')
    let jumping = false;


    

    let down = false
    let up = false


    // detecting key events
    document.onkeydown = (e) => {
        console.log(e.code, up)
        if (e.code == "ArrowUp" && up == false) {
            up = true
            console.log("???")
            charEl.classList.add('up')
            setTimeout(() => {
                charEl.classList.remove('up')
                up = false
            }, 3000)
        }

        console.log(e)
        if (e.code == "ArrowDown" && down == false) {
            down  = true
            charEl.classList.add('down')
            setTimeout(() => {
                charEl.classList.remove('down')
                down = false
            }, 3000)
        }
    }

    // enemy movemnt 1
    let moving1 = false
    const naviEl1 = document.querySelector('.alieni')

    // interval management
    setInterval(() => {
        const random1 = Math.random()
        console.log(random1)
        if (random1 < 0.8 && moving1 == false) {
            moving1 = true
            naviEl1.classList.add('alieni-walking-1')
            setTimeout(() => {
                naviEl1.classList.remove('alieni-walking-1')
                moving1 = false
            }, 4000)

        }

    }, 500)


// enemy movemnt 2
    let moving2 = false
    const naviEl2 = document.querySelector('.alieni2')

    // interval management
    setInterval(() => {
        const random1 = Math.random()
        console.log(random1)
        if (random1 < 0.8 && moving2 == false) {
            moving2 = true
            naviEl2.classList.add('alieni-walking-2')
            setTimeout(() => {
                naviEl2.classList.remove('alieni-walking-2')
                moving2 = false
            }, 4000)

        }

    }, 500)




// enemy movemnt 1
let moving3 = false
    const naviEl3 = document.querySelector('.alieni3')

    // interval management
    setInterval(() => {
        const random1 = Math.random()
        console.log(random1)
        if (random1 < 0.8 && moving3 == false) {
            moving3 = true
            naviEl3.classList.add('alieni-walking-3')
            setTimeout(() => {
                naviEl3.classList.remove('alieni-walking-3')
                moving3 = false
            }, 7500)

        }

    }, 500)



// enemy movemnt 1
let moving4 = false
    const naviEl4 = document.querySelector('.alieni4')

    // interval management
    setInterval(() => {
        const random1 = Math.random()
        console.log(random1)
        if (random1 < 0.8 && moving4 == false) {
            moving4 = true
            naviEl4.classList.add('alieni-walking-4')
            setTimeout(() => {
                naviEl4.classList.remove('alieni-walking-4')
                moving4 = false
            }, 7500)

        }

    }, 500)
  // detect collision
        //TODO
       

    
    // Finish of the level

    setTimeout(() => {   
        alert("You won")
        location.href="endpage.html"
    }, 60 * 1000)


    function isCollide(a, b) {
        var aRect = a.getBoundingClientRect();
        var bRect = b.getBoundingClientRect();

        return !(
            ((aRect.top + aRect.height) < (bRect.top)) ||
            (aRect.top > (bRect.top + bRect.height)) ||
            ((aRect.left + aRect.width) < bRect.left) ||
            (aRect.left > (bRect.left + bRect.width))
        );
    }
</script>





</body>
</html>